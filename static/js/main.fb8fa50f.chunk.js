(this["webpackJsonppeople-matcher-new"]=this["webpackJsonppeople-matcher-new"]||[]).push([[0],{185:function(e,t,a){e.exports=a.p+"static/media/google-icon.2d7c9127.png"},204:function(e,t,a){e.exports=a(361)},209:function(e,t,a){},210:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),o=(a(209),a(210),a(66)),l=a(421),s=a(422),u=a(42),m=a(13),d=a(89),g=a(4),p=a(407),f=a(18),h=a(438),b=a(410),v=a(412),E=a(440),x=a(413),w=a(416),j=a(415),y=a(414),O=a(179),N=a.n(O),C=a(180),S=a.n(C),k=a(181),I=a.n(k),B=a(417),A=a(418),P=a(419),F=a(182),T=a.n(F),L=a(183),R=a.n(L),_=a(184),U=a.n(_),z=a(54);a(211);z.initializeApp({apiKey:"AIzaSyDF9a6lrZiRxIKp4egTzFbIlvUai-sxBTg",authDomain:"peoplematcher-ca9ef.firebaseapp.com",databaseURL:"https://peoplematcher-ca9ef.firebaseio.com",projectId:"peoplematcher-ca9ef",storageBucket:"peoplematcher-ca9ef.appspot.com",messagingSenderId:"468976630953",appId:"1:468976630953:web:67c28399a0d9fa33b3bdb8"});var W=Object(n.createContext)("auth");function G(e){var t=e.children,a=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],g=u[1],p=new z.auth.GoogleAuthProvider;return Object(n.useEffect)((function(){l(!0);var e=z.auth().onAuthStateChanged((function(e){e?(r(e),l(!1)):(r(!1),l(!1))}));return function(){return e()}}),[]),Object(n.useEffect)((function(){g("object"===typeof a)}),[a]),{profile:a,isLoading:o,isLoggedIn:d,signin:function(){return l(!0),z.auth().signInWithPopup(p).then((function(e){return r(e.user),l(!1),e.user})).catch((function(e){console.error(e),l(!1)}))},signout:function(){return z.auth().signOut().then((function(){r(!1)}))}}}();return r.a.createElement(W.Provider,{value:a},t)}var H=function(){return Object(n.useContext)(W)};var D=Object(n.createContext)("router");function q(e){var t=e.children,a=function(){var e=Object(n.useState)("/"),t=Object(m.a)(e,2),a=t[0],r=t[1];return{path:a,goTo:function(e){r(e)}}}();return r.a.createElement(D.Provider,{value:a},t)}var J=function(){return Object(n.useContext)(D)};var K=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),background:"linear-gradient(to right, #663399, #5B72FF)"},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(d.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},toolbar:{display:"flex",justifyContent:"space-between"},userAvatar:{display:"flex",alignItems:"center",cursor:"pointer"},userName:{paddingRight:"1rem",fontWeight:"bold",fontSize:1.3*e.typography.fontSize},clickable:{cursor:"pointer"}}})),M=function(e){var t=e.siteTitle,a=K(),n=H(),i=n.profile,c=n.signout,l=J().goTo,s=Object(f.a)(),d=r.a.useState(!1),p=Object(m.a)(d,2),O=p[0],C=p[1];function k(){l("/")}function F(){l("/profile")}return r.a.createElement("div",{className:a.root},r.a.createElement(b.a,null),r.a.createElement(v.a,{position:"fixed",elevation:0,className:Object(g.a)(a.appBar,Object(u.a)({},a.appBarShift,O))},r.a.createElement(x.a,{className:a.toolbar},r.a.createElement(y.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){C(!0)},edge:"start",className:Object(g.a)(a.menuButton,O&&a.hide)},r.a.createElement(N.a,null)),r.a.createElement(o.a,{variant:"h6",color:"inherit",onClick:k,className:a.clickable},t),r.a.createElement("div",{className:a.userAvatar,onClick:F},r.a.createElement("span",{className:a.userName},(null===i||void 0===i?void 0:i.displayName)+" "),r.a.createElement(E.a,{alt:null===i||void 0===i?void 0:i.displayName,src:null===i||void 0===i?void 0:i.photoURL})))),r.a.createElement(h.a,{className:a.drawer,variant:"persistent",anchor:"left",open:O,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(y.a,{onClick:function(){C(!1)}},"ltr"===s.direction?r.a.createElement(S.a,null):r.a.createElement(I.a,null))),r.a.createElement(j.a,null),r.a.createElement(w.a,null,r.a.createElement(B.a,{button:!0,onClick:k},r.a.createElement(A.a,null,r.a.createElement(T.a,null)),r.a.createElement(P.a,null,"Network")),r.a.createElement(B.a,{button:!0,onClick:F},r.a.createElement(A.a,null,r.a.createElement(R.a,null)),r.a.createElement(P.a,null,"Profile")),r.a.createElement(j.a,null),r.a.createElement(B.a,{button:!0,onClick:function(){c(),l("/")}},r.a.createElement(A.a,null,r.a.createElement(U.a,null)),r.a.createElement(P.a,null,"Sign Out")))))};M.defaultProps={siteTitle:""};var V=M,Y=a(186),X=a.n(Y),Z=a(420),$=a(20),Q=a.n($),ee=a(185),te=a.n(ee),ae=Object(p.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),display:"flex",flexAlign:"center",justifyContent:"center"},submit:{margin:e.spacing(3,0,2)},socialLogin:{width:"50%",marginTop:e.spacing(1)},sighInIcon:{height:"48px",paddingRight:"5px"}}})),ne=function(){var e=ae(),t=H(),a=t.signin,n=t.user;return r.a.createElement(r.a.Fragment,null,!n&&r.a.createElement("div",{className:e.paper},r.a.createElement(E.a,{className:e.avatar},r.a.createElement(X.a,null)),r.a.createElement(o.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(Z.a,{color:"primary",onClick:function(){a().then((function(e){Q.a.database().ref("/users/".concat(e.uid)).once("value").then((function(t){var a=t.val(),n=e.displayName?{username:e.displayName,email:e.email,photoUrl:e.photoURL,tags:[]}:{username:e.displayName,email:e.email,photoUrl:e.photoURL,wholeObject:e,tags:[]};a?(Q.a.database().ref("/users/".concat(e.uid,"/username")).set(n.displayName),Q.a.database().ref("/users/".concat(e.uid,"/email")).set(n.email),Q.a.database().ref("/users/".concat(e.uid,"/photoUrl")).set(n.photoUrl)):Q.a.database().ref("/users/".concat(e.uid)).set(n)}))}))}},r.a.createElement("img",{alt:"Google Icon",className:e.sighInIcon,src:te.a})," with Google"))))};function re(){return r.a.createElement(o.a,{variant:"body2",color:"textSecondary",align:"center",style:{bottom:0,position:"absolute",width:"100%"}},"Copyright \xa9 ",(new Date).getFullYear(),r.a.createElement(l.a,{color:"inherit",href:"https://github.com/burnpiro"}," @burnpiro."),"Built with"," ",r.a.createElement(l.a,{color:"inherit",href:"https://www.reactjs.org"},"React"))}var ie=function(e){var t=e.children,a=H(),n=a.isLoggedIn,i=a.isLoading;return r.a.createElement("div",{style:{height:"100vh",backgroundColor:"#FFF"}},i?r.a.createElement("div",{style:{margin:"auto auto",width:"100%",height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(s.a,{size:100})):r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(V,{siteTitle:"People Matcher"}),r.a.createElement("div",{style:{margin:"0 auto",maxWidth:"calc(100vw - 56px)",position:"relative",height:"100%",padding:"0px 1.0875rem 1.45rem",paddingTop:76}},r.a.createElement("main",{style:{flex:1}},n?t:r.a.createElement(ne,null)),r.a.createElement(re,null))))},ce=a(37),oe=a(65),le=a(187),se=a.n(le),ue=a(188),me=a.n(ue);function de(e){e.description;var t=e.lang,a=e.meta,n=e.title;return r.a.createElement(me.a,{htmlAttributes:{lang:t},title:n,titleTemplate:"%s | People Matcher",meta:[{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{property:"og:title",content:n},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:"@burnpiro"},{name:"twitter:title",content:n}].concat(a)})}de.defaultProps={lang:"en",meta:[],description:""};var ge=de,pe=a(433),fe=a(424),he=a(362),be=a(426),ve=a(430),Ee=a(429),xe=a(427),we=a(428),je=a(441),ye=a(425),Oe=a(437),Ne=a(423),Ce=Object(p.a)((function(e){return{root:{margin:e.spacing(1),cursor:"pointer"},selectedAvatar:{border:"3px red solid"}}})),Se=function(e){var t=e.row,a=e.users,n=e.onSelect,i=e.selectedUser,c=e.edges,o=void 0===c?0:c,l=Ce(),s=a.find((function(e){return e.id===t.id}));return r.a.createElement(Ne.a,{color:"secondary",badgeContent:o,onClick:function(){n(i&&i.id===s.id?null:s)},className:l.root},r.a.createElement(E.a,{className:i&&i.id===s.id?l.selectedAvatar:null,alt:s.username,src:s.photoUrl||"https://raw.githubusercontent.com/google/material-design-icons/master/social/2x_web/ic_person_outline_white_48dp.png"}))},ke=Object(p.a)((function(e){return{root:{position:"absolute",zIndex:100,top:"64px",left:0,width:"100%",maxWidth:"100%"},connectionsColumn:{width:"140px"},nameColumn:{width:"280px"},userAvatar:{padding:e.spacing(1),display:"flex",alignItems:"center",overflowX:"hidden"},userName:{paddingLeft:"1rem",paddingRight:"1rem",fontWeight:"bold",fontSize:1.3*e.typography.fontSize},title:{paddingRight:"1rem"}}})),Ie=function(e,t){return t.tags.length-e.tags.length},Be=function(e){var t=e.selectedNodes,a=e.selectedEdges,i=e.nodes,c=ke(),l=r.a.useState(0),s=Object(m.a)(l,2),u=s[0],d=s[1],g=r.a.useState(null),p=Object(m.a)(g,2),f=p[0],h=p[1],b=r.a.useState(5),v=Object(m.a)(b,2),x=v[0],w=v[1],y=t.length>0?function(e,t,a){var n=a.find((function(t){return t.id===e}));return t.map((function(e){return e.split("/")})).reduce((function(t,r){var i=Object(m.a)(r,2),c=i[0],o=i[1],l=c===e?a.find((function(e){return e.id===o})):a.find((function(e){return e.id===c})),s=n.tags.filter((function(e){return l.tags.some((function(t){return t.uid===e.uid}))})),u=t.findIndex((function(e){return e.id===l.id}));return-1!==u?t[u]={tags:s,id:l.id,name:l.username}:t=[].concat(Object(ce.a)(t),[{tags:s,id:l.id,name:l.username}]),t}),[])}(t[0],a,i):function(e,t){return e.map((function(e){return e.split("/")})).reduce((function(e,a){var n=Object(m.a)(a,2),r=n[0],i=n[1],c=t.find((function(e){return e.id===r})),o=t.find((function(e){return e.id===i})),l=c.tags.filter((function(e){return o.tags.some((function(t){return t.uid===e.uid}))})),s=e.findIndex((function(e){return e.id==="".concat(r,"/").concat(i)}));return-1!==s?e[s]={tags:l,id:"".concat(r,"/").concat(i),name:"".concat(c.username," - ").concat(o.username)}:e=[].concat(Object(ce.a)(e),[{tags:l,id:"".concat(r,"/").concat(i),name:"".concat(c.username," - ").concat(o.username)}]),e}),[])}(a,i);y.sort(Ie),Object(n.useEffect)((function(){h(null)}),[t]);var O=function(e){h(e)};return r.a.createElement(fe.a,{className:c.root},r.a.createElement(he.a,null,r.a.createElement(ye.a,{className:c.container},t.length>0&&t.map((function(e){return i.find((function(t){return t.id===e}))})).map((function(e){return r.a.createElement("div",{className:c.userAvatar,key:e.id},r.a.createElement(o.a,{variant:"h6",color:"inherit",className:c.title},"Selected:"),r.a.createElement(E.a,{alt:null===e||void 0===e?void 0:e.username,src:null===e||void 0===e?void 0:e.photoUrl}),r.a.createElement("span",{className:c.userName},(null===e||void 0===e?void 0:e.username)+" "),r.a.createElement(j.a,{orientation:"vertical",flexItem:!0}),y.slice(0,10).map((function(e){return r.a.createElement(Se,{key:e.id,row:e,users:i,edges:e.tags.length,selectedUser:f,onSelect:O})})))})),r.a.createElement(be.a,{stickyHeader:!0,size:"small"},r.a.createElement(xe.a,null,r.a.createElement(we.a,null,r.a.createElement(Ee.a,{className:c.connectionsColumn,align:"center"},"Connections"),r.a.createElement(Ee.a,{className:c.nameColumn,align:"center"},"Name"),r.a.createElement(Ee.a,null,"Tags"))),r.a.createElement(ve.a,null,null==f&&y.slice(u*x,u*x+x).map((function(e){return r.a.createElement(we.a,{key:e.id},r.a.createElement(Ee.a,{className:c.connectionsColumn,align:"center"},e.tags.length),r.a.createElement(Ee.a,{className:c.nameColumn,align:"center"},e.name),r.a.createElement(Ee.a,null,e.tags.map((function(e){return r.a.createElement(je.a,{key:e.uid,label:e.tagName})}))))})),null!=f&&y.filter((function(e){return e.id===f.id})).map((function(e){return r.a.createElement(we.a,{key:e.id},r.a.createElement(Ee.a,{className:c.connectionsColumn,align:"center"},e.tags.length),r.a.createElement(Ee.a,{className:c.nameColumn,align:"center"},e.name),r.a.createElement(Ee.a,null,e.tags.map((function(e){return r.a.createElement(je.a,{key:e.uid,label:e.tagName})}))))}))))),r.a.createElement(Oe.a,{rowsPerPageOptions:[x],component:"div",count:y.length,rowsPerPage:x,page:u,onChangePage:function(e,t){d(t)},onChangeRowsPerPage:function(e){w(+e.target.value),d(0)}})))},Ae={nodes:{borderWidth:6,size:30},layout:{randomSeed:16,improvedLayout:!0,clusterThreshold:500},physics:{forceAtlas2Based:{gravitationalConstant:-75,springLength:300,springConstant:.03,avoidOverlap:5,centralGravity:.001},hierarchicalRepulsion:{springLength:300},maxVelocity:146,solver:"forceAtlas2Based",timestep:.35,stabilization:{enabled:!0,iterations:100,updateInterval:25}},edges:{arrows:{to:{enabled:!1}},scaling:{customScalingFunction:function(e,t,a,n){return n/(t+e)}},color:"#5B72FF"}};function Pe(e,t){return t.some((function(t){return t===e.to||t===e.from}))}var Fe=function(){var e=Object(oe.b)(Q.a.database().ref("/users")),t=Object(m.a)(e,1)[0],a=Object(n.useState)([]),i=Object(m.a)(a,2),c=i[0],o=i[1],l=Object(n.useState)([]),s=Object(m.a)(l,2),u=s[0],g=s[1],p={select:function(e){var t=e.nodes,a=e.edges;o(t),g(a)}},f=null===t||void 0===t?void 0:t.val(),h="object"===typeof f?Object.keys(f).map((function(e){return Object(d.a)({},f[e],{id:e,tags:f[e].tags||[],shape:"circularImage",image:f[e].photoUrl||"https://raw.githubusercontent.com/google/material-design-icons/master/social/2x_web/ic_person_outline_white_48dp.png",brokenImage:"https://raw.githubusercontent.com/google/material-design-icons/master/social/2x_web/ic_person_outline_white_48dp.png"})})):[],b=h.length>0?h.reduce((function(e,t,a){var n=h.filter((function(e,n){return e.id!==t.id&&n>a})).map((function(e){if(0===e.tags.length)return{value:0};var a=t.tags.filter((function(t){return e.tags.some((function(e){return e.uid===t.uid}))})).length;return{id:"".concat(t.id,"/").concat(e.id),from:t.id,to:e.id,value:a,color:c&&Pe({from:t.id,to:e.id},c)?"red":"#5B72FF"}}));return[].concat(Object(ce.a)(e),Object(ce.a)(n.filter((function(e){return 0!==e.value}))))}),[]):[],v={nodes:h,edges:b};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{title:"Home"}),(u.length>0||c.length>0)&&r.a.createElement(Be,{selectedNodes:c,selectedEdges:u,nodes:h}),r.a.createElement(pe.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(se.a,{graph:v,options:Ae,events:p,style:{height:"calc(100vh - 120px)",width:"100vw"}})))},Te=a(189),Le=a(190),Re=a.n(Le),_e=a(436),Ue=a(439),ze=new Te.DraggableAreasGroup,We=ze.addArea(),Ge=ze.addArea(),He=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},tag:{position:"relative",margin:"3px",fontSize:"16px",border:"2px dashed #cccccc",borderRadius:"4px",padding:e.spacing(1),lineHeight:"30px",color:"#666666",cursor:"pointer",background:"rgba(255, 255, 255, 0.7)"},tagSelected:{border:"2px dashed #3b9de9;"},deleteBtn:{position:"absolute",top:"-1px",right:"-1px",width:"20px",height:"20px",cursor:"pointer",userDrag:"none",userSelect:"none"},dragableBox:{minHeight:"100px",maxHeight:"60vh",overflowY:"scroll",background:"rgba(0, 0, 0, 0.05)"},searchBox:{paddingBottom:e.spacing(1)}}}));var De=function(){var e=He(),t=H().profile,a=Object(oe.b)(Q.a.database().ref("/users/".concat(null===t||void 0===t?void 0:t.uid))),i=Object(m.a)(a,1)[0],c=Object(oe.a)(Q.a.database().ref("/tags")),o=Object(m.a)(c,1)[0],l=Object(n.useState)(""),s=Object(m.a)(l,2),d=s[0],g=s[1],p=Object(n.useState)(""),f=Object(m.a)(p,2),h=f[0],b=f[1],v=null===i||void 0===i?void 0:i.val(),E=(null===v||void 0===v?void 0:v.tags)||[],x=o.filter((function(e){return!E.some((function(t){return t.uid===e.uid}))})).filter((function(e){return function(e,t){var a="(?=.*"+t.split(/\,|\s/).join(")(?=.*")+")",n=new RegExp(a,"gi");return null!==e.match(n)}(e.tagName,h)})),w=function(e){var a=Object(u.a)({},"/users/".concat(null===t||void 0===t?void 0:t.uid,"/tags"),e);Q.a.database().ref().update(a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{title:"Page two"}),r.a.createElement("h1",null,"Select your interests"),r.a.createElement(pe.a,{container:!0,spacing:3},r.a.createElement(pe.a,{item:!0,xs:6},r.a.createElement(he.a,{className:e.paper},r.a.createElement(pe.a,{container:!0,justify:"center",alignItems:"flex-end",className:e.searchBox},r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(_e.a,{required:!0,id:"searchTag",name:"searchTag",label:"Search",onChange:function(e){b(e.target.value)},value:h,fullWidth:!0}))),r.a.createElement(We,{className:e.dragableBox,tags:x,render:function(t){var a=t.tag;return r.a.createElement("div",{key:a.uid,onClick:function(){return function(e){w([].concat(Object(ce.a)(E),[e]))}(a)},className:e.tag},a.tagName)}}),r.a.createElement(pe.a,{container:!0,justify:"center",alignItems:"flex-end"},r.a.createElement(pe.a,{item:!0,xs:9},r.a.createElement(_e.a,{required:!0,id:"tagName",name:"tagName",label:"Tag name",onChange:function(e){g(e.target.value)},value:d,fullWidth:!0})),r.a.createElement(pe.a,{item:!0,xs:3},r.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:d.length<1,onClick:function(){var e=Object(Ue.a)(),t=Q.a.database().ref().child("tags").push().key,a=Object(u.a)({},"/tags/".concat(t),{uid:e,tagName:d});Q.a.database().ref().update(a),g("")},className:e.button},"Add"))))),r.a.createElement(pe.a,{item:!0,xs:6},r.a.createElement(he.a,{className:e.paper},r.a.createElement(Ge,{className:e.dragableBox,tags:E,render:function(t){var a=t.tag;return r.a.createElement("div",{key:a.uid,className:e.tag+" "+e.tagSelected,onClick:function(){return function(e){w(E.filter((function(t){return t.uid!==e.uid})))}(a)}},r.a.createElement(Re.a,{color:"secondary",className:e.deleteBtn}),a.tagName)},onChange:function(e){w(e)}})))))};var qe=function(e){e.paths;var t=J().path;return r.a.createElement(r.a.Fragment,null,"/"===t&&r.a.createElement(Fe,null),"/profile"===t&&r.a.createElement(De,null))};var Je=function(){return r.a.createElement(G,null,r.a.createElement(q,null,r.a.createElement(ie,null,r.a.createElement(qe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,2]]]);
//# sourceMappingURL=main.fb8fa50f.chunk.js.map